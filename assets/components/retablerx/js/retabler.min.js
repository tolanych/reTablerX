/**
 * ReTabler
 * @author tolanych <https://github.com/tolanych>
 * @example
 *	ReTabler.add('#sometable');
 *	ReTabler.add('section.content table');
 *	ReTabler.add('body table');
*/

!function(e){e.closest=e.closest||function(e){for(var t=this;t;){if(t.matches(e))return t;t=t.parentElement}return null}}(Element.prototype);var ReTabler=function(){var h=function(){};return h.add=function(e,t){$prefix=t.prefix?t.prefix:"retabler-",$pad=t.pad?t.pad:"35%",$mincol=t.mincol?t.mincol:"4",i=1,[].forEach.call(document.querySelectorAll(e),function(e){e.getAttribute("retabler")!=$pad&&(e.classList.add($prefix+i),h.generateCss(e,$prefix+i,$pad,$mincol),e.setAttribute("retabler",$pad),i++)})},h.generateCss=function(e,t,r,l){var o=0,n="td",a="";if(t="."+t,is_head=e.querySelectorAll("thead"),is_head.length?(is_head[0].querySelectorAll("th")[0]&&(n="th"),wrapper_head=is_head[0]):(firsttr=e.querySelectorAll("tr")[0],firsttr.querySelectorAll("th")[0]&&(n="th"),wrapper_head=document.createElement("thead"),targetNode=firsttr.closest("table"),targetNode.insertBefore(wrapper_head,targetNode.firstChild),wrapper_head.appendChild(firsttr)),[].forEach.call(e.querySelectorAll("thead tr:nth-child(1) "+n),function(e){if(e.getAttribute("colspan"))return console.log(t+": dont reorganize table with colspan"),!1;o++}),o<l)return console.log(t+": dont reorganize table with column less "+l),!1;a="@media  only screen and (max-width: 768px), (min-device-width: 768px) and (max-device-width: 1024px) {";var d=[" { display:block; }","thead { display:none; }","tbody { display:block; }","th { display:block; }","tr { display:block; border: 1px solid #ccc;}","td { display:block; border: none; border-bottom: 1px solid #eee; position: relative; padding-left: "+r+"!important; }","td:before { position: absolute;left: 6px; width: "+r+"; padding-right: 10px!important; }"];[].forEach.call(d,function(e){a+=t+" "+e}),i=1,[].forEach.call(wrapper_head.querySelectorAll(n),function(e){a+=t+" td:nth-of-type("+i+++'):before { content:"'+e.textContent.trim()+'"; }'}),a+="}";var c=document.createElement("style");c.type="text/css",c.id="st-"+t,c.innerHTML=a,document.querySelectorAll("head")[0].appendChild(c),h.calculateHeight(e),window.addEventListener("resize",function(){h.calculateHeight(e)},!1)},h.numStyle=function(e){return Number(e.slice(0,-2))},h.calculateHeight=function(e){[].forEach.call(e.querySelectorAll("tbody td"),function(e){_hht=window.getComputedStyle(e,null).getPropertyValue("height"),_hhc=window.getComputedStyle(e,":before").getPropertyValue("height"),_hhtpt=window.getComputedStyle(e,null).getPropertyValue("padding-top"),_hhtpb=window.getComputedStyle(e,null).getPropertyValue("padding-bottom"),_hhc=h.numStyle(_hhc),_hht=h.numStyle(_hht),_hhc>_hht&&(e.style["min-height"]=_hhc+h.numStyle(_hhtpt)+h.numStyle(_hhtpb)+"px")})},h}();